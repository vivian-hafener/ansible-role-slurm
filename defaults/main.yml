---
# System details
user_homedir: "/home/vhafener"


# ============ Installation ============
install_slurm: true
build_slurm: "{{ install_slurm }}"
update_slurm: false # TODO Implement this in install.yaml, will need to handle stopping, starting, installing new tag.
# This can probably be done with a bunch of registers

# Source Configuration
slurm_repo: https://github.com/SchedMD/slurm
slurm_version_tag: "slurm-25-05-1-1"

# Installation parameters
slurm_version: "25.05"
slurm_src_target_dir: "{{ user_homedir }}/slurm/{{ slurm_version }}"
slurm_src_dir: "{{ slurm_src_target_dir }}/slurm"
slurm_build_dir: "{{ slurm_src_target_dir }}/{{ inventory_hostname }}/build"

# Slurm configure flags
# Available options inclue --enable-developer or --enable-multiple-slurmd
# For none, set to ""
slurm_configure_flags: "--enable developer"

# Method by which to build slurm. Options are "make.py" or "make"
slurm_build_method: "make.py"

# Make script config
place_make_script: true
make_script_path: "{{ user_homedir }}/slurm/scripts/make.py"
make_script_src: "{{ make_script_path }}"

# Maketags with ctags
maketags: false


# ============ Configuration ============
configure_slurm: true

# Configuration file permissions and ownership
slurm_user: slurm
slurm_group: slurm
slurm_conf_mode: '0644' # Does not apply to Mungekey and Slurmdbd.conf for security reasons
slurm_conf_owner: "{{ slurm_user }}"
slurm_conf_group: "{{ slurm_group }}"
slurm_state_mode: '0750'
slurm_log_mode: '0755'
slurm_dir_mode: '0755'
slurm_backup_conf: true

# Cluster Information
cluster_name: "aspen"
slurm_cluster_name: "aspen" # TODO Migrate over to this format
cluster_domain: "vhafener.com"
slurmctld_host: "n1.{{ cluster_domain }}"
slurmdbd_host: "n1.{{ cluster_domain }}"
slurm_log_dir: "/var/log/slurm"
slurm_state_dir: "/var/spool/slurm"
slurm_conf_dir: /etc/slurm

# Feature toggles
slurm_with_pam: false
slurm_with_gpu: false
slurm_with_cgroups: true
slurm_with_plugstack: false
slurm_with_sackd: false
slurm_with_topo: false
slurm_with_rsyslog: false
slurm_with_logrotate: true
slurm_with_x11: false

# Munge
munge_key_path: "/etc/munge/munge.key"

# MariaDB
slurm_manage_mariadb_security: true
slurm_db_user: slurm
slurm_mysql_password: "test"
slurmdb_root_password: "test"

# Systemctl Settings
slurm_manage_sysctl: false
